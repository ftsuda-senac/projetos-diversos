<!DOCTYPE html>
<html>
    <head>
        <title>TODO supply a title</title>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
    </head>
    <body>
        <div style="position: absolute; top: 0; left: 0; z-index: 100">Exemplo iframe - PÃ¡gina principal</div>
        <div style="position: fixed; top: 0; bottom: 0; left: 0; right: 0;">
            <iframe src="iframe-eventos-pagina-filha.html" style="width: 100%; height: 100%; overflow: hidden; -webkit-overflow-scrolling: touch; border: none;"
                    sandbox="allow-scripts allow-modals allow-popups allow-popups-to-escape-sandbox allow-top-navigation allow-forms allow-same-origin allow-orientation-lock"></iframe>
        </div>
        <dialog id="dialogBox">
            <div class="dialogContent"></div>
            <button id="dialogBtnClose">Fechar</button>
        </dialog>
        <script>
            // Creating an event listener to receive iframe events
            // http://stackoverflow.com/a/15778779
            // http://stackoverflow.com/a/18613782
            // https://developer.mozilla.org/en-US/docs/Web/API/CustomEvent/CustomEvent
            document.addEventListener('iframebuttonclick', function (evt) {
                // alert('Evento do iframe disparado\n' + 'Type: ' + evt.detail.type + '\nValue: ' + evt.detail.value);
                const dialogBox = document.getElementById('dialogBox');
                dialogBox.querySelector('.dialogContent').innerHTML = 'Evento disparado do iframe:<br>Type: <strong>' + evt.detail.type + '</strong><br>Value: <strong>' + evt.detail.value + '</strong>';
                dialogBox.showModal();
                console.log("Evento do iframe disparado:" + evt.detail.type + "," + evt.detail.value);
            }, false);

            // https://developer.mozilla.org/pt-BR/docs/Web/HTML/Element/dialog
            document.getElementById("dialogBtnClose").onclick = function (evt) {
                const dialogBox = document.getElementById('dialogBox');
                dialogBox.close();
            }
        </script>

    </body>
</html>
